<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="member">
	<select id="getByM_id" resultType="memberDTO" parameterType="string">
		<![CDATA[
		select M_id, M_pwd, M_name, email, contact, zipcode, address, detail_address, joined_date, role
		from member_TB 
		where M_id = #{M_id }
		]]>
	</select>

	<insert id="insert" parameterType="memberDTO">
		<![CDATA[
			insert into member_TB
			values(#{M_id }, #{M_pwd }, #{M_name }, #{email }, #{contact }, #{zipcode }, #{address }, #{detail_address }, sysdate, 'ROLE_USER')
		]]>
	</insert>

	<select id="selectById" resultType="Integer">
		<![CDATA[
			select count(*)
			from member_TB 
			where M_id = #{M_id }
		]]>
	</select>

	<select id="selectIdByEmail" resultType="string">
		<![CDATA[
			select M_id
			from member_TB 
			where email = #{email }
		]]>
	</select>

	<select id="selectByEmail" resultType="Integer">
		<![CDATA[
			select count(*)
			from member_TB 
			where email = #{email }
		]]>
	</select>
	
	<select id="selectByEmailandId" parameterType="HashMap" resultType="Integer">
		<![CDATA[
			select count(*)
			from member_TB 
			where email = #{email } AND M_id = #{M_id }
		]]>
	</select>
	
	<update id="update" parameterType="memberDTO">
		<![CDATA[
			update member_TB
			set #{M_pwd }, #{M_name }, #{contact }, #{zipcode }, #{address }, #{detail_address }, sysdate, 'ROLE_USER')
			where M_id = #{M_id }
		]]>
	</update>
	
	<update id="delete" parameterType="memberDTO">
		<![CDATA[
			delete
			from member_TB
			where M_id = #{M_id }
			
		]]>
	</update>
	
	
	
	
	
</mapper>