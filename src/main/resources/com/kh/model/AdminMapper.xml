<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="admin">

<update id="modify" parameterType="productDTO">
      <![CDATA[
         update product_TB
         set p_Name = #{p_Name }, p_Price = #{p_Price }, p_Stock = #{p_Stock }, p_Intro=#{p_Intro }, p_Date=#{p_Date }
         where p_Id = #{p_Id }
      ]]>
   </update>
   
<!-- 상품이미지 테이블 삭제 -->
<update id="delete1" parameterType="productDTO">
      <![CDATA[
       
            delete
            from product_image_TB
            where p_Id = #{p_Id }
         
      ]]>
   </update>
   
<!-- 상품테이블 삭제 -->
   <update id="delete2" parameterType="productDTO">
      <![CDATA[

            delete
            from product_TB
            where p_Id = #{p_Id }

      ]]>
   </update>

<!-- 	<sql id="criteria">
		<trim prefix="(" suffix=") AND" prefixOverrides="AND">
			<foreach item="type" collection="typeArr">
				<trim prefix="AND">
					<choose>
						<when test="type == 'C'.toString()">
							p_Category like #{c_Code} || '%'
						</when>
						<when test="type == 'T'.toString()">
							p_Name like '%' || #{keyword} || '%'
						</when>
					</choose>
				</trim>
			</foreach>
		</trim>
	</sql>
 -->
 
 
 
 
 
 


<!-- 상품 정보 -->
    <select id="selectMemberinfo" parameterType="String" resultType="memberDTO">
      select M_id, M_name, email, contact, zipcode, address, detail_address, joined_date, role
      from member_TB 
      where M_id = #{M_id }
   </select>

<select id="selectMemberList" resultType="memberDTO">
	  	<![CDATA[
			select /*+INDEX_DESC(member_TB P_index)*/ rownum as rn, M_id, M_name,
					email, contact, zipcode, address, detail_address,joined_date,role
			from member_TB 
			
		
		
		]]>
 	<!-- 	<include refid="criteria"></include>
		<![CDATA[    
		    	rownum <= #{pageNum} * #{amount} 
		    )
			where rn > (#{pageNum} - 1) * #{amount}		  	
  		]]> -->
	</select> 

<select id="getTotal" resultType="int">
		select count(*) from member_TB
		<if test="keyword != null">
			where M_name like '%' || #{keyword} || '%'
		</if>
	</select>
	
	<select id="getByM_id" resultType="memberDTO"
		parameterType="string">
		<![CDATA[
		select M_id, M_pwd, M_name, email, contact, zipcode, address, detail_address, joined_date, role
		from member_TB 
		where M_id = #{M_id }
		]]>
	</select>
	



</mapper>
